<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Platinum</title>
  <script src="/assets/js/init.js"></script>
  <script src="/baremux/index.js" defer></script>
  <script src="/epoxy/index.js" defer></script>
  <script src="/uv/uv.bundle.js" defer></script>
  <script src="/uv/uv.config.js" defer></script>
  <script src="/scram/scramjet.all.js"></script>
  <script src="/ec/eclipse.codecs.js" defer></script>
  <script src="/ec/eclipse.config.js" defer></script>
  <script src="/assets/js/search.js"></script>
  <style>
:root {
      --background-color: #1a1a1a;
      --main-color: #8b5cf6;
      --text-color: #fff;
      --hover-text-color: #bbb;
      --tab-bg-color: #1c1c1c;
      --tab-active-bg-color: #292929;
      --tab-color: #444;
      --border-color: #333;
      --iframe-border: none;
      --sidebar-bg: #111;
      --font: #e8eaed;
      --iconbg: #222;
      --searchbar: #2a2a2a;
      --accent: #00ffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar */
    .sidebar {
      width: 160px;
      background-color: var(--sidebar-bg);
      padding: 20px 0;
      display: flex;
      flex-direction: column;
      transition: background-color 0.3s ease;
      z-index: 1000;
      flex-shrink: 0;
    }

    .logo {
      display: flex;
      align-items: center;
      padding: 0 20px;
      margin-bottom: 30px;
    }

    .logo-icon {
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      border-radius: 4px;
      margin-right: 10px;
      position: relative;
    }

    .logo-icon::after {
      content: "P";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-weight: bold;
      font-size: 14px;
    }

    .logo-text {
      font-size: 18px;
      font-weight: 600;
      color: var(--font);
    }

    .nav-menu {
      list-style: none;
      flex-grow: 1;
    }

    .nav-item {
      margin-bottom: 8px;
    }

    .nav-link {
      display: flex;
      align-items: center;
      padding: 12px 20px;
      color: #9ca3af;
      text-decoration: none;
      font-size: 14px;
      transition: all 0.2s;
      border-radius: 8px;
      margin: 0 12px;
    }

    .nav-link:hover,
    .nav-link.active {
      background-color: var(--iconbg);
      color: var(--font);
    }

    .nav-icon {
      width: 24px;
      height: 24px;
      margin-right: 12px;
      opacity: 0.7;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .settings-section {
      padding: 20px;
      border-top: 1px solid var(--iconbg);
      margin-top: auto;
    }

    .settings-link {
      display: flex;
      align-items: center;
      color: #9ca3af;
      text-decoration: none;
      font-size: 14px;
    }

    .settings-link:hover {
      color: var(--font);
    }

    /* Main area (tabs + content) */
    .main-area {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      overflow: hidden;
    }

    .tabs {
      box-sizing: border-box;
      position: relative;
      font-size: 12px;
      height: 46px;
      padding: 0;
      background: var(--background-color);
      overflow-x: auto;
      overflow-y: hidden;
      white-space: nowrap;
      display: flex;
      align-items: flex-end;
      padding-bottom: 0;
    }

    .tabs * { 
      box-sizing: inherit; 
    }

    .tabs-content {
      position: relative;
      width: calc(100% - 54px);
      height: 100%;
      gap: 5px;
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
    }

    .tab {
      display: flex;
      align-items: center;
      background-color: var(--tab-bg-color);
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
      width: 240px;
      height: 38px;
      padding: 0 8px;
      margin-right: 5px;
      cursor: pointer;
      transition: background 0.2s ease;
      flex-shrink: 0;
      position: relative;
      border: 1px solid transparent;
      border-bottom: none;
    }

    .tab.active {
      background-color: #1c1c1c;
      border-top: 2px solid var(--main-color);
      border-left: 2px solid var(--main-color);
      border-right: 2px solid var(--main-color);
      border-bottom: none;
      height: 42px;
      margin-bottom: -4px;
      z-index: 100;
      position: relative;
    }

    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      right: 0;
      height: 4px;
      background-color: #1c1c1c;
      z-index: 101;
    }

    .tab-favicon {
      width: 16px;
      height: 16px;
      margin-right: 6px;
      flex-shrink: 0;
    }

    .tab-title {
      flex: 1;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 140px;
      color: var(--hover-text-color);
    }

    .tab.active .tab-title {
      color: var(--text-color);
    }

    .tab-close {
      background: none;
      border: none;
      color: var(--text-color);
      font-size: 14px;
      cursor: pointer;
      margin-left: 50px;
      padding: 4px;
      line-height: 1;
    }

    .tab-close:hover {
      color: var(--main-color);
    }

    #new-tab {
      background: none;
      border: none;
      color: var(--text-color);
      font-size: 22px;
      cursor: pointer;
      margin-left: 6px;
      flex-shrink: 0;
      padding: 4px 8px;
      line-height: 1;
    }

    #new-tab:hover {
      color: var(--main-color);
    }

    .viewport {
      flex: 1;
      position: relative;
      background-color: var(--background-color);
    }

    iframe {
      width: 100%;
      height: 100%;
      border: var(--iframe-border);
      display: none;
    }

    iframe.active {
      display: block;
    }

    /* Top Bar Container */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 12px;
      height: 48px;
      background-color: #1c1c1c;
      border-bottom: 1px solid #333;
      border-top: 2px solid var(--main-color);
      position: relative;
      z-index: 50;
    }

    /* Left and Right Icon Groups */
    .left-icons,
    .right-icons {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Individual Icon */
    .icon {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: opacity 0.2s;
    }

    .icon:hover {
      opacity: 0.7;
    }

    .icon a {
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    /* Search Bar */
    .top-bar form {
      flex: 1;
      display: flex;
      justify-content: center;
      margin: 0 12px;
    }

    .search-bar {
      width: 100%;
      max-width: 900px;
      height: 32px;
      padding: 4px 12px;
      border-radius: 6px;
      border: 1px solid #444;
      background-color: #2c2c2c;
      color: #e3e3e3;
      font-size: 14px;
      outline: none;
      transition: border-color 0.2s;
    }

    .search-bar:focus {
      border-color: var(--main-color);
    }

    .search-bar::placeholder {
      color: #aaa;
    }

    /* Right-aligned single icon override */
    .right-icons .icon.right {
      margin-left: 12px;
    }

    /* Optional hover effects */
    .icon a:hover svg path {
      fill: #f5f5f5;
    }

    /* Scrollbar styling for tabs */
    .tabs::-webkit-scrollbar {
      height: 4px;
    }

    .tabs::-webkit-scrollbar-track {
      background: var(--background-color);
    }

    .tabs::-webkit-scrollbar-thumb {
      background: var(--iconbg);
      border-radius: 2px;
    }

    .tabs::-webkit-scrollbar-thumb:hover {
      background: var(--main-color);
    } 
    /* Search Suggestions */
#search-suggestions {
  position: absolute;
  top: 42px; /* below search bar */
  left: 12px;
  width: calc(100% - 24px);
  max-height: 300px;
  overflow-y: auto;
  background-color: var(--tab-bg-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  display: none;
  z-index: 1000;
  font-size: 14px;
  color: var(--text-color);
}

/* Each suggestion */
#search-suggestions .suggestion-item {
  padding: 10px 14px;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}

#search-suggestions .suggestion-item:hover {
  background-color: var(--searchbar);
  color: var(--main-color);
}

/* Scrollbar styling */
#search-suggestions::-webkit-scrollbar {
  width: 8px;
}
#search-suggestions::-webkit-scrollbar-track {
  background: var(--tab-bg-color);
}
#search-suggestions::-webkit-scrollbar-thumb {
  background-color: var(--iconbg);
  border-radius: 4px;
}
#search-suggestions::-webkit-scrollbar-thumb:hover {
  background-color: var(--main-color);
}
    </style>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZD9NQ396G3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZD9NQ396G3');
</script>
</head>
<body>

  <div class="sidebar">
    <div class="logo">
      <div class="logo-icon"></div>
      <div class="logo-text">Platinum</div>
    </div>
    <ul class="nav-menu">
      <li class="nav-item">
        <a href="/search" class="nav-link">
          <div class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
              <path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/>
            </svg>
          </div> Home
        </a>
      </li>
      <li class="nav-item">
        <a href="/lessons" class="nav-link">
          <div class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
              <path d="m272-440 208 120 208-120-168-97v137h-80v-137l-168 97Zm168-189v-17q-44-13-72-49.5T340-780q0-58 41-99t99-41q58 0 99 41t41 99q0 48-28 84.5T520-646v17l280 161q19 11 29.5 29.5T840-398v76q0 22-10.5 40.5T800-252L520-91q-19 11-40 11t-40-11L160-252q-19-11-29.5-29.5T120-322v-76q0-22 10.5-40.5T160-468l280-161Zm0 378L200-389v67l280 162 280-162v-67L520-251q-19 11-40 11t-40-11Zm40-469q25 0 42.5-17.5T540-780q0-25-17.5-42.5T480-840q-25 0-42.5 17.5T420-780q0 25 17.5 42.5T480-720Zm0 560Z"/>
            </svg>
          </div> Games
        </a>
      </li>
      <li class="nav-item">
        <a href="/tools" class="nav-link">
          <div class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
              <path d="M240-160q-33 0-56.5-23.5T160-240q0-33 23.5-56.5T240-320q33 0 56.5 23.5T320-240q0 33-23.5 56.5T240-160Zm240 0q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm240 0q-33 0-56.5-23.5T640-240q0-33 23.5-56.5T720-320q33 0 56.5 23.5T800-240q0 33-23.5 56.5T720-160ZM240-400q-33 0-56.5-23.5T160-480q0-33 23.5-56.5T240-560q33 0 56.5 23.5T320-480q0 33-23.5 56.5T240-400Zm240 0q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm240 0q-33 0-56.5-23.5T640-480q0-33 23.5-56.5T720-560q33 0 56.5 23.5T800-480q0 33-23.5 56.5T720-400ZM240-640q-33 0-56.5-23.5T160-720q0-33 23.5-56.5T240-800q33 0 56.5 23.5T320-720q0 33-23.5 56.5T240-640Zm240 0q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Zm240 0q-33 0-56.5-23.5T640-720q0-33 23.5-56.5T720-800q33 0 56.5 23.5T800-720q0 33-23.5 56.5T720-640Z"/>
            </svg>
          </div> Apps
        </a>
      </li>
      <li class="nav-item">
        <a href="/helper" class="nav-link">
          <div class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
              <path d="M240-400h320v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"/>
            </svg>
          </div> AI
        </a>
      </li>
      <li class="nav-item">
        <a href="/tool" class="nav-link">
          <div class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
              <path d="M756-120 537-339l84-84 219 219-84 84Zm-552 0-84-84 276-276-68-68-28 28-51-51v82l-28 28-121-121 28-28h82l-50-50 142-142q20-20 43-29t47-9q24 0 47 9t43 29l-92 92 50 50-28 28 68 68 90-90q-4-11-6.5-23t-2.5-24q0-59 40.5-99.5T701-841q15 0 28.5 3t27.5 9l-99 99 72 72 99-99q7 14 9.5 27.5T841-701q0 59-40.5 99.5T701-561q-12 0-24-2t-23-7L204-120Z"/>
            </svg>
          </div> Tools
        </a>
      </li>
      <li class="nav-item">
        <a href="/watch" class="nav-link">
          <div class="nav-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m160-800 80 160h120l-80-160h80l80 160h120l-80-160h80l80 160h120l-80-160h120q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800Zm0 240v320h640v-320H160Zm0 0v320-320Z"/></svg>
          </div> Watch
        </a>
      </li>
            <li class="nav-item">
          <a href="https://dsc.gg/platinumnetwork" class="nav-link">
          <div class="nav-icon">
            <svg width="24px" height="24px" viewBox="0 -28.5 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" fill="#e8eaed"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z" fill="#e8eaed" fill-rule="nonzero"> </path> </g> </g></svg>
          </div> Discord
        </a>
      </li>
    </ul>

    <div class="settings-section">
      <a href="/settings" class="settings-link">
        <div class="nav-icon">
          <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#e8eaed">
            <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16-128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5-23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0-58 40.5 99t99.5 41Zm-2-140Z"/>
          </svg>
        </div> Settings
      </a>
    </div>
  </div>

  <div class="main-area">
    <div class="tabs">
      <div class="tabs-content" id="tabs-content"></div>
      <button id="new-tab">+</button>
    </div>
      <!-- Top Bar -->
  <div class="top-bar">
    <div class="left-icons">
      <div class="icon">
        <a onclick="goBack()">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
            <path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"/>
          </svg>
        </a>
      </div>
      <div class="icon">
        <a id="reload">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
            <path d="M480-160q-134 0-227-93t-93-227q0-134 93-227t227-93q69 0 132 28.5T720-690v-110h80v280H520v-80h168q-32-56-87.5-88T480-720q-100 0-170 70t-70 170q0 100 70 170t170 70q77 0 139-44t87-116h84q-28 106-114 173t-196 67Z"/>
          </svg>
        </a>
      </div>
      <div class="icon">
        <a onclick="goForward()">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
            <path d="M647-440H160v-80h487L423-744l57-56 320 320-320 320-57-56 224-224Z"/>
          </svg>
        </a>
      </div>
    </div>

    <!-- Search Bar -->
    <form id="form">
      <input id="indexInput" class="search-bar" type="text" placeholder="Search or enter a URL..." />
    </form>

    <!-- Right Icons -->
    <div class="right-icons">
      <div class="icon right">
        <a id="devtools">
          <svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.90451 6.92144C8.41341 6.45495 8.44779 5.66424 7.9813 5.15534C7.51481 4.64645 6.7241 4.61207 6.2152 5.07856L7.90451 6.92144ZM1.46194 11.1314L2.3066 12.0529L1.46194 11.1314ZM1.46194 11.8686L2.3066 10.9471L1.46194 11.8686ZM6.2152 17.9214C6.7241 18.3879 7.51481 18.3536 7.9813 17.8447C8.44779 17.3358 8.41341 16.545 7.90451 16.0786L6.2152 17.9214ZM6.2152 5.07856L0.617287 10.21L2.3066 12.0529L7.90451 6.92144L6.2152 5.07856ZM0.617287 12.79L6.2152 17.9214L7.90451 16.0786L2.3066 10.9471L0.617287 12.79ZM0.617287 10.21C-0.139356 10.9036 -0.139356 12.0964 0.617287 12.79L2.3066 10.9471C2.63087 11.2444 2.63087 11.7556 2.3066 12.0529L0.617287 10.21Z" fill="#e3e3e3"></path>
            <path d="M16.0557 16.0786C15.5468 16.545 15.5125 17.3358 15.9789 17.8447C16.4454 18.3536 17.2361 18.3879 17.745 17.9214L16.0557 16.0786ZM22.4983 11.8686L21.6537 10.9471L22.4983 11.8686ZM22.4983 11.1314L21.6537 12.0529L22.4983 11.1314ZM17.745 5.07856C17.2361 4.61207 16.4454 4.64645 15.979 5.15534C15.5125 5.66424 15.5468 6.45495 16.0557 6.92144L17.745 5.07856ZM17.745 17.9214L23.343 12.79L21.6537 10.9471L16.0557 16.0786L17.745 17.9214ZM23.343 10.21L17.745 5.07856L16.0557 6.92144L21.6537 12.0529L23.343 10.21ZM23.343 12.79C24.0996 12.0964 24.0996 10.9036 23.343 10.21L21.6537 12.0529C21.3294 11.7556 21.3294 11.2444 21.6537 10.9471L23.343 12.79Z" fill="#e3e3e3"></path>
            <path d="M15.2127 3.80317C15.3801 3.13343 14.9729 2.45476 14.3032 2.28732C13.6334 2.11989 12.9548 2.52709 12.7873 3.19683L15.2127 3.80317ZM8.78732 19.1968C8.61989 19.8666 9.02709 20.5452 9.69683 20.7127C10.3666 20.8801 11.0452 20.4729 11.2127 19.8032L8.78732 19.1968ZM12.7873 3.19683L8.78732 19.1968L11.2127 19.8032L15.2127 3.80317L12.7873 3.19683Z" fill="#e3e3e3"></path>
          </svg>
        </a>
      </div>

      <div class="icon">
        <a id="fullscreen">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
            <path d="M120-120v-200h80v120h120v80H120Zm520 0v-80h120v-120h80v200H640ZM120-640v-200h200v80H200v120h-80Zm640 0v-120H640v-80h200v200h-80Z"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
    <div class="viewport" id="iframe-container"></div>
  </div>

<script>
const tabsContent = document.getElementById("tabs-content");
const iframeContainer = document.getElementById("iframe-container");
const newTabBtn = document.getElementById("new-tab");
// Container for search results
let resultsContainer = document.createElement("div");
resultsContainer.id = "search-suggestions";
document.body.appendChild(resultsContainer);

const searchInput = document.getElementById("indexInput");
const searchForm = document.getElementById("form");

// Fetch suggestions from /results/QUERY
async function fetchSuggestions(query) {
    if (!query) return [];
    try {
        const res = await fetch(`/results/${query}`);
        if (!res.ok) return [];
        const data = await res.json(); // Expecting: [{ phrase: "..." }, ...]
        return data;
    } catch (err) {
        console.error("Error fetching suggestions:", err);
        return [];
    }
}

// Render suggestions
searchInput.addEventListener("input", async () => {
    const query = searchInput.value.trim();
    if (!query) {
        resultsContainer.style.display = "none";
        resultsContainer.innerHTML = "";
        return;
    }

    const suggestions = await fetchSuggestions(query);
    resultsContainer.innerHTML = "";

    suggestions.forEach(item => {
        const div = document.createElement("div");
        div.className = "suggestion-item";
        div.textContent = item.phrase;

        // Click on suggestion: fill input and trigger form submit event
        div.addEventListener("click", () => {
            searchInput.value = item.phrase;

            // Create and dispatch a submit event
            const submitEvent = new Event("submit", { bubbles: true, cancelable: true });
            searchForm.dispatchEvent(submitEvent);
            resultsContainer.style.display = "none";
            resultsContainer.innerHTML = "";
        });

        resultsContainer.appendChild(div);
    });

    resultsContainer.style.display = suggestions.length ? "block" : "none";

    // Position under input
    const rect = searchInput.getBoundingClientRect();
    resultsContainer.style.top = rect.bottom + window.scrollY + "px";
    resultsContainer.style.left = rect.left + window.scrollX + "px";
    resultsContainer.style.width = rect.width + "px";
});

// Hide suggestions if clicking outside
document.addEventListener("click", (e) => {
    if (!searchInput.contains(e.target) && !resultsContainer.contains(e.target)) {
        resultsContainer.style.display = "none";
    }
});


let tabCount = 0;
let activeTabId = null;
const tabHistory = {}; // { tabId: [url1, url2, ...], index: currentIndex }

// Create a new tab
function createTab(url = "/search") {
    const id = "tab-" + (++tabCount);

    // Initialize history
    tabHistory[id] = [url];
    tabHistory[id].index = 0;

    // Create tab element
    const tab = document.createElement("div");
    tab.className = "tab";
    tab.dataset.id = id;

    const favicon = document.createElement("img");
    favicon.className = "tab-favicon";
    try {
        favicon.src = `https://www.google.com/s2/favicons?domain=${new URL(url, window.location.origin).hostname}`;
    } catch {
        favicon.src = "";
    }
    favicon.alt = "icon";

    const titleEl = document.createElement("div");
    titleEl.className = "tab-title";
    titleEl.textContent = url;

    const closeBtn = document.createElement("button");
    closeBtn.className = "tab-close";
    closeBtn.innerHTML = "Ã—";

    tab.append(favicon, titleEl, closeBtn);
    tabsContent.appendChild(tab);

    // Create iframe
    const iframe = document.createElement("iframe");
    iframe.src = url;
    iframe.id = id;
    iframeContainer.appendChild(iframe);

    // Update title & favicon when iframe loads (same-origin only)
    iframe.addEventListener("load", () => {
        try {
            const doc = iframe.contentDocument;
            if (doc) {
                const pageTitle = doc.title || url;
                titleEl.textContent = pageTitle;
                const icons = doc.querySelectorAll("link[rel*='icon']");
                if (icons.length) favicon.src = icons[0].href;
            }
        } catch {}
    });

    // Tab click -> activate
    tab.addEventListener("click", e => {
        if (e.target === closeBtn) return;
        activateTab(id);
    });

    // Close button
    closeBtn.addEventListener("click", e => {
        e.stopPropagation();
        removeTab(id);
    });

    activateTab(id);
}

// Activate a tab
function activateTab(id) {
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
    document.querySelectorAll("iframe").forEach(f => f.classList.remove("active"));

    const tab = document.querySelector(`.tab[data-id="${id}"]`);
    const frame = document.getElementById(id);
    if (!tab || !frame) return;

    tab.classList.add("active");
    frame.classList.add("active");
    activeTabId = id;
}

// Remove a tab
function removeTab(id) {
    const tab = document.querySelector(`.tab[data-id="${id}"]`);
    const frame = document.getElementById(id);
    if (tab) tab.remove();
    if (frame) frame.remove();
    delete tabHistory[id];

    if (activeTabId === id) {
        const lastTab = tabsContent.querySelector(".tab:last-child");
        if (lastTab) activateTab(lastTab.dataset.id);
        else activeTabId = null;
    }
}

// New tab button
newTabBtn.addEventListener("click", () => createTab("/search"));

// Sidebar links open in tab system
document.querySelectorAll('.sidebar .nav-link, .sidebar .settings-link').forEach(link => {
    link.addEventListener('click', e => {
        const url = link.getAttribute('href');

        // If link has class "external-tab" or points to Discord
        if (link.classList.contains('external-tab') || url.includes('dsc.gg')) {
            window.open(url, '_blank'); // opens real new browser tab
            return; // skip internal tab handling
        }

        e.preventDefault(); // normal SPA tab handling
        const existingTab = Array.from(document.querySelectorAll('.tab')).find(t => {
            const iframe = document.getElementById(t.dataset.id);
            return iframe && iframe.src === url;
        });
        if (existingTab) activateTab(existingTab.dataset.id);
        else createTab(url);
    });
});


// Back / Forward / Reload functions for active tab
function goBack() {
    if (!activeTabId) return;
    const history = tabHistory[activeTabId];
    if (!history || history.index <= 0) return;
    history.index--;
    document.getElementById(activeTabId).src = history[history.index];
}

function goForward() {
    if (!activeTabId) return;
    const history = tabHistory[activeTabId];
    if (!history || history.index >= history.length - 1) return;
    history.index++;
    document.getElementById(activeTabId).src = history[history.index];
}

function reload() {
    if (!activeTabId) return;
    const iframe = document.getElementById(activeTabId);
    if (iframe) iframe.contentWindow.location.reload();
}

// Fullscreen
function toggleFullscreen() {
    if (!activeTabId) return;
    const elem = document.getElementById(activeTabId);
    if (!elem) return;

    if (elem.requestFullscreen) elem.requestFullscreen();
    else if (elem.mozRequestFullScreen) elem.mozRequestFullScreen();
    else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
    else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
}

// Eruda devtools toggle
function toggleEruda() {
    if (!activeTabId) return;
    const iframe = document.getElementById(activeTabId);
    if (!iframe) return;
    const win = iframe.contentWindow;
    const doc = iframe.contentDocument;
    if (!win || !doc) return;

    if (win.eruda && win.eruda._isInit) {
        win.eruda.destroy();
    } else {
        if (!win.eruda) {
            const script = doc.createElement("script");
            script.src = "https://cdn.jsdelivr.net/npm/eruda";
            script.onload = () => {
                if (win.eruda) { win.eruda.init(); win.eruda.show(); }
            };
            doc.head.appendChild(script);
        } else {
            win.eruda.init();
            win.eruda.show();
        }
    }
}


// Hook buttons
document.getElementById("reload").addEventListener("click", reload);
document.getElementById("fullscreen").addEventListener("click", toggleFullscreen);
document.getElementById("devtools").addEventListener("click", toggleEruda);

// Open active tab in new window
function togglePopup() {
    if (!activeTabId) return;
    window.open(document.getElementById(activeTabId).src);
}

// Initialize default tab
createTab("/search");

</script>
  <script src="assets/js/browser.js" defer></script>
  <script src="assets/js/themes.js" defer></script>
  <script src="scram/scramjet.controller.js" defer></script>
  <script src="/assets/js/bug.js"></script>
</body>
</html>
